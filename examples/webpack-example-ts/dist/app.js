!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){e.exports=n(2)},function(e,t){function n(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))}}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new p(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function h(){}function A(){}var g={};g[o]=function(){return this};var m=Object.getPrototypeOf,R=m&&m(m(T([])));R&&R!==t&&n.call(R,o)&&(g=R);var I=A.prototype=d.prototype=Object.create(g);function f(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function v(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(v,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=I.constructor=A,A.constructor=h,h.displayName=s(A,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,s(e,a,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},f(N.prototype),N.prototype[i]=function(){return this},e.AsyncIterator=N,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new N(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},f(I),s(I,a,"Generator"),I[o]=function(){return this},I.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i);
/*! ****************************************************************************
Copyright (c) Microblink. All rights reserved.

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function s(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}class c{constructor(e){if(!e)throw new Error("Native RecognizerRunner cannot be empty!");this.nativeRecognizerRunner=e}processImage(e){return new Promise((t,n)=>{if(!this.nativeRecognizerRunner)return void n("Property nativeRecognizerRunner is not available!");t(this.nativeRecognizerRunner.processImage(e))})}reconfigureRecognizers(e,t){return new Promise((n,r)=>{if(this.nativeRecognizerRunner)try{this.nativeRecognizerRunner.reconfigureRecognizers(e,t),n()}catch(e){r(e)}else r("Property nativeRecognizerRunner is not available!")})}setMetadataCallbacks(e){return new Promise((t,n)=>{this.nativeRecognizerRunner?(this.nativeRecognizerRunner.setJSDelegate(e),t()):n("Property nativeRecognizerRunner is not available!")})}resetRecognizers(e){return new Promise((t,n)=>{this.nativeRecognizerRunner?(this.nativeRecognizerRunner.resetRecognizers(e),t()):n("Property nativeRecognizerRunner is not available!")})}setDetectionOnlyMode(e){return new Promise((t,n)=>{this.nativeRecognizerRunner?(this.nativeRecognizerRunner.setDetectionOnlyMode(e),t()):n("Property nativeRecognizerRunner is not available!")})}setClearTimeoutCallback(e){return new Promise((t,n)=>{this.nativeRecognizerRunner?(this.nativeRecognizerRunner.setClearTimeoutCallback(e),t()):n("Property nativeRecognizerRunner is not available!")})}setCameraPreviewMirrored(e){return new Promise((t,n)=>{this.nativeRecognizerRunner?(this.nativeRecognizerRunner.setCameraPreviewMirrored(e),t()):n("Property nativeRecognizerRunner is not available!")})}delete(){return new Promise(e=>{this.nativeRecognizerRunner.delete(),this.nativeRecognizerRunner=null,e()})}}class l{constructor(e){this.realWasmModule=e}newRecognizer(e,...t){const n=new this.realWasmModule[e](...t);return n.recognizerName=e,Promise.resolve(n)}createRecognizerRunner(e,t=!1,n={}){const r=new this.realWasmModule.RecognizerRunner(e,t,n);return Promise.resolve(new c(r))}}class u{constructor(e){this.mbWasmModule=new l(e)}}let d=0;class h{constructor(e){this.action=e,this.messageID=function(){const e=d;return d+=1,e}()}}class A extends h{constructor(e,t){super(A.action),this.wasmModuleName=e.wasmModuleName,this.licenseKey=e.licenseKey,this.userId=t,this.registerLoadCallback=null!==e.loadProgressCallback,this.allowHelloMessage=e.allowHelloMessage,this.engineLocation=e.engineLocation}}var g,m,R,I,f;A.action="init",function(e){e[e.Any=0]="Any",e[e.Recognizer=1]="Recognizer"}(g||(g={}));class N extends h{constructor(e,t){super(N.action),this.className=e,this.params=t}}N.action="createNewNativeObject";class E extends h{constructor(e,t,n){super(E.action),this.recognizerHandles=e,this.allowMultipleResults=t,this.registeredMetadataCallbacks=n}}E.action="createRecognizerRunner";class v extends h{constructor(e,t){super(v.action),this.recognizerHandles=e,this.allowMultipleResults=t}}v.action="reconfigureRecognizerRunner";class S extends h{constructor(){super(S.action)}}S.action="deleteRecognizerRunner";class p extends h{constructor(e,t,n){super(p.action),this.objectHandle=e,this.methodName=t,this.params=n}}p.action="invokeObject";class T extends h{constructor(e){super(T.action),this.frame=e}getTransferrables(){return[this.frame.imageData.data.buffer]}}T.action="processImage";class C extends h{constructor(e){super(C.action),this.hardReset=e}}C.action="resetRecognizers";class O{constructor(){this.onDebugText=!1,this.onDetectionFailed=!1,this.onQuadDetection=!1,this.onPointsDetection=!1,this.onFirstSideResult=!1,this.onGlare=!1}}class D extends h{constructor(e){super(D.action),this.registeredMetadataCallbacks=e}}D.action="registerMetadataCallbacks";class b extends h{constructor(e){super(b.action),this.detectionOnlyMode=e}}b.action="setDetectionOnly";class y extends h{constructor(e){super(y.action),this.callbackNonEmpty=e}}y.action="setClearTimeoutCallback";class w extends h{constructor(e){super(w.action),this.cameraPreviewMirrored=e}}function M(e,t){return n=>{const r=n;r.success?e():t(r.error)}}function L(e,t){return n=>{const r=n;r.success?e(n):t(r.error)}}w.action="setCameraPreviewMirrored",function(e){e[e.onDebugText=0]="onDebugText",e[e.onDetectionFailed=1]="onDetectionFailed",e[e.onQuadDetection=2]="onQuadDetection",e[e.onPointsDetection=3]="onPointsDetection",e[e.onFirstSideResult=4]="onFirstSideResult",e[e.clearTimeoutCallback=5]="clearTimeoutCallback",e[e.onGlare=6]="onGlare"}(m||(m={}));class P{constructor(e,t,n){this.wasmSDKWorker=e,this.objectHandle=n,this.recognizerName=t}getRemoteObjectHandle(){return this.objectHandle}currentSettings(){return new Promise((e,t)=>{if(this.objectHandle<0)return void t("Invalid object handle: "+this.objectHandle.toString());const n=new p(this.objectHandle,"currentSettings",[]),r=L(t=>{e(t.result)},t);this.wasmSDKWorker.postMessage(n,r)})}updateSettings(e){return new Promise((t,n)=>{if(this.objectHandle<0)return void n("Invalid object handle: "+this.objectHandle.toString());const r=new p(this.objectHandle,"updateSettings",[{parameter:e,type:g.Any}]),o=M(t,n);this.wasmSDKWorker.postMessage(r,o)})}getResult(){return new Promise((e,t)=>{if(this.objectHandle<0)return void t("Invalid object handle: "+this.objectHandle.toString());const n=new p(this.objectHandle,"getResult",[]),r=L(t=>{e(t.result)},t);this.wasmSDKWorker.postMessage(n,r)})}delete(){return new Promise((e,t)=>{if(this.objectHandle<0)return void t("Invalid object handle: "+this.objectHandle.toString());const n=new p(this.objectHandle,"delete",[]),r=M(()=>{this.objectHandle=-1,e()},t);this.wasmSDKWorker.postMessage(n,r)})}}function k(e){const t=new O;return t.onDebugText=!!e.onDebugText,t.onDetectionFailed=!!e.onDetectionFailed,t.onPointsDetection=!!e.onPointsDetection,t.onQuadDetection=!!e.onQuadDetection,t.onFirstSideResult=!!e.onFirstSideResult,t.onGlare=!!e.onGlare,t}class F{constructor(e){this.deleted=!1,this.wasmSDKWorker=e}processImage(e){return new Promise((t,n)=>{if(this.deleted)return void n("Recognizer runner is deleted. It cannot be used anymore!");const r=new T(e),o=L(e=>{const n=e.recognitionState;t(n)},n);this.wasmSDKWorker.postTransferrableMessage(r,o)})}reconfigureRecognizers(e,t){return new Promise((n,r)=>{if(this.deleted)return void r("Recognizer runner is deleted. It cannot be used anymore!");const o=_(e),i=new v(o,t),a=M(n,r);this.wasmSDKWorker.postMessage(i,a)})}setMetadataCallbacks(e){return new Promise((t,n)=>{const r=new D(k(e)),o=M(t,n);this.wasmSDKWorker.postMessageAndRegisterCallbacks(r,e,o)})}resetRecognizers(e){return new Promise((t,n)=>{const r=new C(e),o=M(t,n);this.wasmSDKWorker.postMessage(r,o)})}setDetectionOnlyMode(e){return new Promise((t,n)=>{const r=new b(e),o=M(t,n);this.wasmSDKWorker.postMessage(r,o)})}setClearTimeoutCallback(e){return new Promise((t,n)=>{const r=new y(null!==e),o=M(t,n);this.wasmSDKWorker.registerClearTimeoutCallback(e),this.wasmSDKWorker.postMessage(r,o)})}setCameraPreviewMirrored(e){return new Promise((t,n)=>{const r=new w(e),o=M(t,n);this.wasmSDKWorker.postMessage(r,o)})}delete(){return this.deleted?Promise.reject("Recognizer runner is already deleted."):new Promise((e,t)=>{const n=new S,r=M(()=>{this.deleted=!0,e()},t);this.wasmSDKWorker.postMessage(n,r)})}}function _(e){const t=[];for(const n of e)t.push(n.getRemoteObjectHandle());return t}class U{constructor(e){this.wasmSDKWorker=e}createRecognizerRunner(e,t=!1,n={}){return new Promise((r,o)=>{const i=_(e),a=new E(i,t,k(n)),s=M(()=>{r(new F(this.wasmSDKWorker))},o);this.wasmSDKWorker.postMessageAndRegisterCallbacks(a,n,s)})}newRecognizer(e,...t){return new Promise((n,r)=>{const o=new N(e,function(e){const t=[];for(let n of e){let e=g.Any;n instanceof P&&(e=g.Recognizer,n=n.getRemoteObjectHandle()),t.push({parameter:n,type:e})}return t}(t)),i=L(t=>{const r=new P(this.wasmSDKWorker,e,t.objectHandle);n(r)},r);this.wasmSDKWorker.postMessage(o,i)})}}class W{constructor(e,t){this.eventHandlers={},this.metadataCallbacks={},this.clearTimeoutCallback=null,this.mbWasmWorker=e,this.mbWasmWorker.onmessage=e=>{this.handleWorkerEvent(e)},this.mbWasmWorker.onerror=()=>{throw new Error("Problem during initialization of worker file...")},this.mbWasmModule=new U(this),this.loadCallback=t}postMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e)}postTransferrableMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e,e.getTransferrables())}postMessageAndRegisterCallbacks(e,t,n){this.eventHandlers[e.messageID]=n,this.metadataCallbacks=t,this.mbWasmWorker.postMessage(e)}registerClearTimeoutCallback(e){this.clearTimeoutCallback=e}handleWorkerEvent(e){if("isCallbackMessage"in e.data){const t=e.data;switch(t.callbackType){case m.onDebugText:"function"==typeof this.metadataCallbacks.onDebugText&&this.metadataCallbacks.onDebugText(t.callbackParameters[0]);break;case m.onDetectionFailed:"function"==typeof this.metadataCallbacks.onDetectionFailed&&this.metadataCallbacks.onDetectionFailed();break;case m.onPointsDetection:"function"==typeof this.metadataCallbacks.onPointsDetection&&this.metadataCallbacks.onPointsDetection(t.callbackParameters[0]);break;case m.onQuadDetection:"function"==typeof this.metadataCallbacks.onQuadDetection&&this.metadataCallbacks.onQuadDetection(t.callbackParameters[0]);break;case m.onFirstSideResult:"function"==typeof this.metadataCallbacks.onFirstSideResult&&this.metadataCallbacks.onFirstSideResult();break;case m.clearTimeoutCallback:this.clearTimeoutCallback&&"function"==typeof this.clearTimeoutCallback.onClearTimeout&&this.clearTimeoutCallback.onClearTimeout();break;case m.onGlare:"function"==typeof this.metadataCallbacks.onGlare&&this.metadataCallbacks.onGlare(t.callbackParameters[0]);break;default:throw new Error("Unknown callback type: "+m[t.callbackType])}}else if("isLoadProgressMessage"in e.data){const t=e.data;"function"==typeof this.loadCallback&&this.loadCallback(t.progress)}else{const t=e.data,n=this.eventHandlers[t.messageID];delete this.eventHandlers[t.messageID],n(t)}}static createWasmWorker(e,t,n){return s(this,void 0,void 0,(function*(){return new Promise((r,o)=>{const i=new W(e,t.loadProgressCallback),a=new A(t,n),s=M(()=>{r(i)},o);i.postMessage(a,s)})}))}}function H(e,t){return t=t||"",""===(e=e||"")?t:e.endsWith("/")?t.startsWith("/")?e+t.substring(1):e+t:t.startsWith("/")?e+t:e+"/"+t}let K;!function(e){e[e.RotatedLeft90=0]="RotatedLeft90",e[e.NoRotation=1]="NoRotation",e[e.RotatedRight90=2]="RotatedRight90",e[e.Rotated180=3]="Rotated180"}(R||(R={})),function(e){e[e.Empty=0]="Empty",e[e.Uncertain=1]="Uncertain",e[e.Valid=2]="Valid"}(I||(I={})),function(e){e[e.Fail=0]="Fail",e[e.Success=1]="Success",e[e.CameraTooHigh=2]="CameraTooHigh",e[e.FallbackSuccess=3]="FallbackSuccess",e[e.Partial=4]="Partial",e[e.CameraAtAngle=5]="CameraAtAngle",e[e.CameraTooNear=6]="CameraTooNear",e[e.DocumentTooCloseToEdge=7]="DocumentTooCloseToEdge"}(f||(f={}));class z{constructor(e,t,n){this.imageData=e,this.orientation=t,this.videoFrame=n}}var x,B,G;!function(e){e[e.BackFacingCamera=0]="BackFacingCamera",e[e.FrontFacingCamera=1]="FrontFacingCamera"}(x||(x={})),function(e){e.MediaDevicesNotSupported="MediaDevicesNotSupported",e.CameraNotFound="CameraNotFound",e.CameraNotAllowed="CameraNotAllowed",e.CameraInUse="CameraInUse",e.CameraNotAvailable="CameraNotAvailable",e.VideoElementNotProvided="VideoElementNotProvided"}(B||(B={}));class V extends Error{constructor(e,...t){super(...t),this.reason=e,this.name="VideoRecognizerError"}}!function(e){e[e.Recognition=0]="Recognition",e[e.RecognitionTest=1]="RecognitionTest",e[e.DetectionTest=2]="DetectionTest"}(G||(G={}));class j{constructor(e,t,n=!1){this.videoFeed=null,this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.recognitionTimeoutMs=3e4,this.timeoutID=0,this.videoRecognitionMode=G.Recognition,this.onScanningDone=null,this.allowManualVideoPlayout=!1,this.videoFeed=e,this.recognizerRunner=t,n&&(this.allowManualVideoPlayout=n)}static createVideoRecognizerFromCameraStream(e,t,n=x.BackFacingCamera){return s(this,void 0,void 0,(function*(){return new Promise((r,o)=>s(this,void 0,void 0,(function*(){if(e&&e instanceof Element)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const i=yield function(e){return s(this,void 0,void 0,(function*(){const t=[],n=[];{let e=yield navigator.mediaDevices.enumerateDevices();if(e.filter(e=>"videoinput"===e.kind).every(e=>""===e.label)){const t=yield navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});e=yield navigator.mediaDevices.enumerateDevices(),t.getTracks().forEach(e=>e.stop())}const r=e.filter(e=>"videoinput"===e.kind);for(const e of r)Z(e.label)?n.push(new Q(e,x.BackFacingCamera)):t.push(new Q(e,x.FrontFacingCamera))}if(t.length>0||n.length>0){let r=n.length>0?n:t;e===x.BackFacingCamera&&n.length>0&&(r=n),e===x.FrontFacingCamera&&t.length>0&&(r=t),r=r.sort((e,t)=>e.label.localeCompare(t.label));{let e=0;const t=r.map(e=>{const t=RegExp(/\b([0-9]+)MP?\b/,"i").exec(e.label);return null!==t?parseInt(t[1],10):NaN});return t.some(e=>isNaN(e))||(e=t.lastIndexOf(Math.max(...t))),r[e]}}return null}))}(n);if(null===i)return void o(new V(B.CameraNotFound));const a={audio:!1,video:{width:{min:640,ideal:1920,max:1920},height:{min:480,ideal:1080,max:1080}}};if(""===i.deviceId){const e=n===x.BackFacingCamera;a.video.facingMode={ideal:e?"environment":"user"}}else a.video.deviceId={exact:i.deviceId};const c=yield navigator.mediaDevices.getUserMedia(a);e.controls=!1,e.srcObject=c,i.facing===x.FrontFacingCamera&&(e.style.transform="scaleX(-1)");const l=i.facing===x.FrontFacingCamera;yield t.setCameraPreviewMirrored(l),r(new j(e,t))}catch(e){let t=B.CameraInUse;switch(e.name){case"NotFoundError":case"OverconstrainedError":t=B.CameraNotFound;break;case"NotAllowedError":case"SecurityError":t=B.CameraNotAllowed;break;case"AbortError":case"NotReadableError":t=B.CameraNotAvailable;break;case"TypeError":throw e}o(new V(t,e.message))}else o(new V(B.MediaDevicesNotSupported));else{const e="Video element, i.e. camera feed is not provided!";o(new V(B.VideoElementNotProvided,e))}})))}))}static createVideoRecognizerFromVideoPath(e,t,n){return s(this,void 0,void 0,(function*(){return new Promise(r=>{t.src=e,t.currentTime=0,t.onended=()=>{o.cancelRecognition()};const o=new j(t,n);r(o)})}))}setVideoRecognitionMode(e){return s(this,void 0,void 0,(function*(){this.videoRecognitionMode=e;const t=this.videoRecognitionMode===G.DetectionTest;yield this.recognizerRunner.setDetectionOnlyMode(t)}))}startRecognition(e,t=3e4){if(null===this.videoFeed)throw new Error("The associated video feed has been released!");if(!this.videoFeed.paused)throw new Error("The associated video feed is not paused. Use resumeRecognition instead!");this.cancelled=!1,this.recognitionPaused=!1,this.clearTimeout(),this.recognitionTimeoutMs=t,this.onScanningDone=e,this.recognizerRunner.setClearTimeoutCallback({onClearTimeout:()=>this.clearTimeout()}),this.videoFeed.play().then(()=>this.playPauseEvent(),e=>{if(!this.allowManualVideoPlayout)throw console.warn("Native error",e),new Error("The play() request was interrupted or prevented by browser security rules!");this.videoFeed&&(this.videoFeed.controls=!0,this.videoFeed.addEventListener("play",()=>this.playPauseEvent()),this.videoFeed.addEventListener("pause",()=>this.playPauseEvent()))})}recognize(e=3e4){return s(this,void 0,void 0,(function*(){return new Promise((t,n)=>{try{this.startRecognition(e=>{this.pauseVideoFeed(),t(e)},e)}catch(e){n(e)}})}))}cancelRecognition(){this.cancelled=!0}pauseVideoFeed(){this.pauseRecognition(),this.videoFeed&&this.videoFeed.pause()}pauseRecognition(){this.recognitionPaused=!0}resetRecognizers(e){return s(this,void 0,void 0,(function*(){yield this.recognizerRunner.resetRecognizers(e)}))}getRecognizerRunner(){return this.recognizerRunner}resumeRecognition(e){if(this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.videoFeed&&this.videoFeed.paused){throw new Error("Cannot resume recognition while video feed is paused! Use recognize or startRecognition")}setTimeout(()=>{e?this.resetRecognizers(!0).then(()=>{this.recognitionLoop()}).catch(()=>{throw new Error("Could not reset recognizers!")}):this.recognitionLoop()},1)}releaseVideoFeed(){null!==this.videoFeed&&(null!==this.videoFeed.srcObject&&(this.videoFeed.paused||this.cancelRecognition(),this.videoFeed.srcObject.getTracks().forEach(e=>e.stop()),this.videoFeed.srcObject=null),this.videoFeed=null)}playPauseEvent(){this.videoFeed&&this.videoFeed.paused?this.cancelRecognition():this.resumeRecognition(!0)}recognitionLoop(){return s(this,void 0,void 0,(function*(){if(!this.videoFeed)throw new Error("Missing video feed!");const e=function(e){let t,n,r=!1;if(e instanceof HTMLVideoElement)t=e.videoWidth,n=e.videoHeight,r=!0;else if(e instanceof HTMLImageElement)t=e.naturalWidth,n=e.naturalHeight;else{if(e instanceof SVGImageElement)throw new Error("Recognition of SVG elements not supported!");t=e.width,n=e.height}K=K||document.createElement("canvas"),K.width=t,K.height=n;const o=K.getContext("2d");if(!o)throw new Error("Could not get canvas 2d context!");o.drawImage(e,0,0,K.width,K.height);const i=o.getImageData(0,0,K.width,K.height);return new z(i,R.NoRotation,r)}(this.videoFeed),t=yield this.recognizerRunner.processImage(e);t===I.Valid||this.cancelled||this.timedOut?this.videoRecognitionMode===G.Recognition||this.cancelled?(this.clearTimeout(),this.onScanningDone&&this.onScanningDone(t)):(yield this.recognizerRunner.resetRecognizers(!0),this.clearTimeout()):t!==I.Empty&&0===this.timeoutID&&(this.timeoutID=window.setTimeout(()=>{this.timedOut=!0},this.recognitionTimeoutMs)),this.recognitionPaused||setTimeout(()=>{this.recognitionLoop()},1)}))}clearTimeout(){this.timeoutID>0&&(window.clearTimeout(this.timeoutID),this.timeoutID=0)}}const Y=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];function Z(e){const t=e.toLowerCase();return Y.some(e=>t.includes(e))}class Q{constructor(e,t){this.deviceId=e.deviceId,this.facing=t,this.groupId=e.groupId,this.label=e.label}}class J{constructor(e){if(this.allowHelloMessage=!0,this.engineLocation="",this.loadProgressCallback=null,this.useWebWorker=!0,this.wasmModuleName="BlinkIDWasmSDK",this.workerLocation="",!e)throw new Error("Missing license key!");this.licenseKey=e}}function X(){let e=localStorage.getItem("mb-user-id");return null===e&&(e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),localStorage.setItem("mb-user-id",e)),e}function q(e){return s(this,void 0,void 0,(function*(){return new Promise((t,n)=>{if(!e||"object"!=typeof e)return void n("Missing WASM load settings!");if("string"!=typeof e.licenseKey)return void n("Missing license key!");if(!e.wasmModuleName)return void n("Missing WASM module name!");if("string"!=typeof e.workerLocation)return void n("Setting property 'workerLocation' must be a string!");if("string"!=typeof e.engineLocation)return void n("Setting property 'engineLocation' must be a string!");const r=X();if(e.useWebWorker)try{const o=(e.wasmModuleName||"MicroblinkSDK")+".worker.min.js",i=H(e.workerLocation,o),a=new Worker(i);W.createWasmWorker(a,e,r).then(e=>{t(e)},n)}catch(e){n(e)}else{const o=self[e.wasmModuleName];let i=void 0;"function"==typeof e.loadProgressCallback&&(i={setStatus:t=>{e.loadProgressCallback&&e.loadProgressCallback(function(e){if("Running..."===e)return 100;if(0===e.length)return 0;const t=RegExp(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/).exec(e);if(t){return 100*parseInt(t[2])/parseInt(t[4])}return NaN}(t))},locateFile:t=>H(e.engineLocation,t)}),o(i).then(o=>{try{return o.initializeWithLicenseKey(e.licenseKey,r,e.allowHelloMessage),void t(new u(o))}catch(e){return void n(e)}},e=>{n(e)})}})}))}function $(e,t,n=!1,r={}){return s(this,void 0,void 0,(function*(){if("object"!=typeof e)throw new Error("SDK is not provided!");if("object"!=typeof t||t.length<1)throw new Error("To create RecognizerRunner at least 1 recognizer is required.");return e.mbWasmModule.createRecognizerRunner(t,n,r)}))}var ee,te,ne,re,oe,ie,ae,se,ce,le;!function(e){e[e.NONE=0]="NONE",e[e.QR_CODE=1]="QR_CODE",e[e.DATA_MATRIX=2]="DATA_MATRIX",e[e.UPC_E=3]="UPC_E",e[e.UPC_A=4]="UPC_A",e[e.EAN_8=5]="EAN_8",e[e.EAN_13=6]="EAN_13",e[e.CODE_128=7]="CODE_128",e[e.CODE_39=8]="CODE_39",e[e.ITF=9]="ITF",e[e.AZTEC_BARCODE=10]="AZTEC_BARCODE",e[e.PDF417_BARCODE=11]="PDF417_BARCODE"}(ee||(ee={}));!function(e){e[e.None=0]="None",e[e.ImageOnly=1]="ImageOnly",e[e.ResultFieldsOnly=2]="ResultFieldsOnly",e[e.FullResult=3]="FullResult"}(te||(te={}));!function(e){e[e.NONE=0]="NONE",e[e.ALBANIA=1]="ALBANIA",e[e.ALGERIA=2]="ALGERIA",e[e.ARGENTINA=3]="ARGENTINA",e[e.AUSTRALIA=4]="AUSTRALIA",e[e.AUSTRIA=5]="AUSTRIA",e[e.AZERBAIJAN=6]="AZERBAIJAN",e[e.BAHRAIN=7]="BAHRAIN",e[e.BANGLADESH=8]="BANGLADESH",e[e.BELGIUM=9]="BELGIUM",e[e.BOSNIA_AND_HERZEGOVINA=10]="BOSNIA_AND_HERZEGOVINA",e[e.BRUNEI=11]="BRUNEI",e[e.BULGARIA=12]="BULGARIA",e[e.CAMBODIA=13]="CAMBODIA",e[e.CANADA=14]="CANADA",e[e.CHILE=15]="CHILE",e[e.COLOMBIA=16]="COLOMBIA",e[e.COSTA_RICA=17]="COSTA_RICA",e[e.CROATIA=18]="CROATIA",e[e.CYPRUS=19]="CYPRUS",e[e.CZECHIA=20]="CZECHIA",e[e.DENMARK=21]="DENMARK",e[e.DOMINICAN_REPUBLIC=22]="DOMINICAN_REPUBLIC",e[e.EGYPT=23]="EGYPT",e[e.ESTONIA=24]="ESTONIA",e[e.FINLAND=25]="FINLAND",e[e.FRANCE=26]="FRANCE",e[e.GEORGIA=27]="GEORGIA",e[e.GERMANY=28]="GERMANY",e[e.GHANA=29]="GHANA",e[e.GREECE=30]="GREECE",e[e.GUATEMALA=31]="GUATEMALA",e[e.HONG_KONG=32]="HONG_KONG",e[e.HUNGARY=33]="HUNGARY",e[e.INDIA=34]="INDIA",e[e.INDONESIA=35]="INDONESIA",e[e.IRELAND=36]="IRELAND",e[e.ISRAEL=37]="ISRAEL",e[e.ITALY=38]="ITALY",e[e.JORDAN=39]="JORDAN",e[e.KAZAKHSTAN=40]="KAZAKHSTAN",e[e.KENYA=41]="KENYA",e[e.KOSOVO=42]="KOSOVO",e[e.KUWAIT=43]="KUWAIT",e[e.LATVIA=44]="LATVIA",e[e.LITHUANIA=45]="LITHUANIA",e[e.MALAYSIA=46]="MALAYSIA",e[e.MALDIVES=47]="MALDIVES",e[e.MALTA=48]="MALTA",e[e.MAURITIUS=49]="MAURITIUS",e[e.MEXICO=50]="MEXICO",e[e.MOROCCO=51]="MOROCCO",e[e.NETHERLANDS=52]="NETHERLANDS",e[e.NEW_ZEALAND=53]="NEW_ZEALAND",e[e.NIGERIA=54]="NIGERIA",e[e.PAKISTAN=55]="PAKISTAN",e[e.PANAMA=56]="PANAMA",e[e.PARAGUAY=57]="PARAGUAY",e[e.PHILIPPINES=58]="PHILIPPINES",e[e.POLAND=59]="POLAND",e[e.PORTUGAL=60]="PORTUGAL",e[e.PUERTO_RICO=61]="PUERTO_RICO",e[e.QATAR=62]="QATAR",e[e.ROMANIA=63]="ROMANIA",e[e.RUSSIA=64]="RUSSIA",e[e.SAUDI_ARABIA=65]="SAUDI_ARABIA",e[e.SERBIA=66]="SERBIA",e[e.SINGAPORE=67]="SINGAPORE",e[e.SLOVAKIA=68]="SLOVAKIA",e[e.SLOVENIA=69]="SLOVENIA",e[e.SOUTH_AFRICA=70]="SOUTH_AFRICA",e[e.SPAIN=71]="SPAIN",e[e.SWEDEN=72]="SWEDEN",e[e.SWITZERLAND=73]="SWITZERLAND",e[e.TAIWAN=74]="TAIWAN",e[e.THAILAND=75]="THAILAND",e[e.TUNISIA=76]="TUNISIA",e[e.TURKEY=77]="TURKEY",e[e.UAE=78]="UAE",e[e.UGANDA=79]="UGANDA",e[e.UK=80]="UK",e[e.UKRAINE=81]="UKRAINE",e[e.USA=82]="USA",e[e.VIETNAM=83]="VIETNAM",e[e.BRAZIL=84]="BRAZIL",e[e.NORWAY=85]="NORWAY",e[e.OMAN=86]="OMAN",e[e.ECUADOR=87]="ECUADOR",e[e.EL_SALVADOR=88]="EL_SALVADOR",e[e.SRI_LANKA=89]="SRI_LANKA",e[e.COUNT=90]="COUNT"}(ne||(ne={})),function(e){e[e.NONE=0]="NONE",e[e.ALABAMA=1]="ALABAMA",e[e.ALASKA=2]="ALASKA",e[e.ALBERTA=3]="ALBERTA",e[e.ARIZONA=4]="ARIZONA",e[e.ARKANSAS=5]="ARKANSAS",e[e.AUSTRALIAN_CAPITAL_TERRITORY=6]="AUSTRALIAN_CAPITAL_TERRITORY",e[e.BRITISH_COLUMBIA=7]="BRITISH_COLUMBIA",e[e.CALIFORNIA=8]="CALIFORNIA",e[e.COLORADO=9]="COLORADO",e[e.CONNECTICUT=10]="CONNECTICUT",e[e.DELAWARE=11]="DELAWARE",e[e.DISTRICT_OF_COLUMBIA=12]="DISTRICT_OF_COLUMBIA",e[e.FLORIDA=13]="FLORIDA",e[e.GEORGIA=14]="GEORGIA",e[e.HAWAII=15]="HAWAII",e[e.IDAHO=16]="IDAHO",e[e.ILLINOIS=17]="ILLINOIS",e[e.INDIANA=18]="INDIANA",e[e.IOWA=19]="IOWA",e[e.KANSAS=20]="KANSAS",e[e.KENTUCKY=21]="KENTUCKY",e[e.LOUISIANA=22]="LOUISIANA",e[e.MAINE=23]="MAINE",e[e.MANITOBA=24]="MANITOBA",e[e.MARYLAND=25]="MARYLAND",e[e.MASSACHUSETTS=26]="MASSACHUSETTS",e[e.MICHIGAN=27]="MICHIGAN",e[e.MINNESOTA=28]="MINNESOTA",e[e.MISSISSIPPI=29]="MISSISSIPPI",e[e.MISSOURI=30]="MISSOURI",e[e.MONTANA=31]="MONTANA",e[e.NEBRASKA=32]="NEBRASKA",e[e.NEVADA=33]="NEVADA",e[e.NEW_BRUNSWICK=34]="NEW_BRUNSWICK",e[e.NEW_HAMPSHIRE=35]="NEW_HAMPSHIRE",e[e.NEW_JERSEY=36]="NEW_JERSEY",e[e.NEW_MEXICO=37]="NEW_MEXICO",e[e.NEW_SOUTH_WALES=38]="NEW_SOUTH_WALES",e[e.NEW_YORK=39]="NEW_YORK",e[e.NORTHERN_TERRITORY=40]="NORTHERN_TERRITORY",e[e.NORTH_CAROLINA=41]="NORTH_CAROLINA",e[e.NORTH_DAKOTA=42]="NORTH_DAKOTA",e[e.NOVA_SCOTIA=43]="NOVA_SCOTIA",e[e.OHIO=44]="OHIO",e[e.OKLAHOMA=45]="OKLAHOMA",e[e.ONTARIO=46]="ONTARIO",e[e.OREGON=47]="OREGON",e[e.PENNSYLVANIA=48]="PENNSYLVANIA",e[e.QUEBEC=49]="QUEBEC",e[e.QUEENSLAND=50]="QUEENSLAND",e[e.RHODE_ISLAND=51]="RHODE_ISLAND",e[e.SASKATCHEWAN=52]="SASKATCHEWAN",e[e.SOUTH_AUSTRALIA=53]="SOUTH_AUSTRALIA",e[e.SOUTH_CAROLINA=54]="SOUTH_CAROLINA",e[e.SOUTH_DAKOTA=55]="SOUTH_DAKOTA",e[e.TASMANIA=56]="TASMANIA",e[e.TENNESSEE=57]="TENNESSEE",e[e.TEXAS=58]="TEXAS",e[e.UTAH=59]="UTAH",e[e.VERMONT=60]="VERMONT",e[e.VICTORIA=61]="VICTORIA",e[e.VIRGINIA=62]="VIRGINIA",e[e.WASHINGTON=63]="WASHINGTON",e[e.WESTERN_AUSTRALIA=64]="WESTERN_AUSTRALIA",e[e.WEST_VIRGINIA=65]="WEST_VIRGINIA",e[e.WISCONSIN=66]="WISCONSIN",e[e.WYOMING=67]="WYOMING",e[e.YUKON=68]="YUKON",e[e.COUNT=69]="COUNT"}(re||(re={})),function(e){e[e.NONE=0]="NONE",e[e.CONSULAR_ID=1]="CONSULAR_ID",e[e.DL=2]="DL",e[e.DL_PUBLIC_SERVICES_CARD=3]="DL_PUBLIC_SERVICES_CARD",e[e.EMPLOYMENT_PASS=4]="EMPLOYMENT_PASS",e[e.FIN_CARD=5]="FIN_CARD",e[e.ID=6]="ID",e[e.MULTIPURPOSE_ID=7]="MULTIPURPOSE_ID",e[e.MyKad=8]="MyKad",e[e.MyKid=9]="MyKid",e[e.MyPR=10]="MyPR",e[e.MyTentera=11]="MyTentera",e[e.PAN_CARD=12]="PAN_CARD",e[e.PROFESSIONAL_ID=13]="PROFESSIONAL_ID",e[e.PUBLIC_SERVICES_CARD=14]="PUBLIC_SERVICES_CARD",e[e.RESIDENCE_PERMIT=15]="RESIDENCE_PERMIT",e[e.RESIDENT_ID=16]="RESIDENT_ID",e[e.TEMPORARY_RESIDENCE_PERMIT=17]="TEMPORARY_RESIDENCE_PERMIT",e[e.VOTER_ID=18]="VOTER_ID",e[e.WORK_PERMIT=19]="WORK_PERMIT",e[e.iKAD=20]="iKAD",e[e.MILITARY_ID=21]="MILITARY_ID",e[e.MyKAS=22]="MyKAS",e[e.SOCIAL_SECURITY_CARD=23]="SOCIAL_SECURITY_CARD",e[e.HEALTH_INSURANCE_CARD=24]="HEALTH_INSURANCE_CARD",e[e.COUNT=25]="COUNT"}(oe||(oe={})),function(e){e[e.NotAvailable=0]="NotAvailable",e[e.BlackAndWhite=1]="BlackAndWhite",e[e.Color=2]="Color"}(ie||(ie={})),function(e){e[e.NotAvailable=0]="NotAvailable",e[e.NotDetected=1]="NotDetected",e[e.Detected=2]="Detected"}(ae||(ae={})),function(e){e[e.Success=0]="Success",e[e.DetectionFailed=1]="DetectionFailed",e[e.ImagePreprocessingFailed=2]="ImagePreprocessingFailed",e[e.StabilityTestFailed=3]="StabilityTestFailed",e[e.ScanningWrongSide=4]="ScanningWrongSide",e[e.FieldIdentificationFailed=5]="FieldIdentificationFailed",e[e.MandatoryFieldMissing=6]="MandatoryFieldMissing",e[e.InvalidCharactersFound=7]="InvalidCharactersFound",e[e.ImageReturnFailed=8]="ImageReturnFailed",e[e.BarcodeRecognitionFailed=9]="BarcodeRecognitionFailed",e[e.MrzParsingFailed=10]="MrzParsingFailed",e[e.ClassFiltered=11]="ClassFiltered",e[e.UnsupportedClass=12]="UnsupportedClass",e[e.UnsupportedByLicense=13]="UnsupportedByLicense"}(se||(se={})),function(e){e[e.None=0]="None",e[e.MrzId=1]="MrzId",e[e.MrzVisa=2]="MrzVisa",e[e.MrzPassport=3]="MrzPassport",e[e.PhotoId=4]="PhotoId",e[e.FullRecognition=5]="FullRecognition",e[e.Count=6]="Count"}(ce||(ce={}));function ue(e){return s(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("BlinkIdRecognizer")}))}function de(e){return s(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("IdBarcodeRecognizer")}))}!function(e){e[e.None=0]="None",e[e.AAMVACompliant=1]="AAMVACompliant",e[e.ArgentinaID=2]="ArgentinaID",e[e.ArgentinaDL=3]="ArgentinaDL",e[e.ColombiaID=4]="ColombiaID",e[e.ColombiaDL=5]="ColombiaDL",e[e.NigeriaVoterID=6]="NigeriaVoterID",e[e.NigeriaDL=7]="NigeriaDL",e[e.PanamaID=8]="PanamaID",e[e.SouthAfricaID=9]="SouthAfricaID"}(le||(le={}));var he=document.getElementById("msg"),Ae=document.getElementById("load-progress"),ge=document.getElementById("camera-feed"),me=document.getElementById("camera-feedback"),Re=me.getContext("2d"),Ie=document.getElementById("camera-guides");function fe(){return(fe=a()(o.a.mark((function e(t){var n,r,i,a,s,c,l,u,d,h,A;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=document.getElementById("screen-start"))||void 0===n||n.classList.add("hidden"),null===(r=document.getElementById("screen-scanning"))||void 0===r||r.classList.remove("hidden"),e.next=4,ue(t);case 4:return s=e.sent,e.next=7,de(t);case 7:return c=e.sent,l={onQuadDetection:function(e){return Ne(e)},onDetectionFailed:function(){return Se("Detection failed",!0)}},e.next=11,$(t,[s,c],!1,l);case 11:return u=e.sent,e.next=14,j.createVideoRecognizerFromCameraStream(ge,u);case 14:return d=e.sent,e.next=17,d.recognize();case 17:if(e.sent===I.Empty){e.next=29;break}return e.next=21,s.getResult();case 21:return(h=e.sent).state!==I.Empty&&(console.log("BlinkIDGeneric results",h),alert("Hello, ".concat(h.firstName||h.mrz.secondaryID," ").concat(h.lastName||h.mrz.primaryID,"!\nYou were born on ").concat(h.dateOfBirth.year||h.mrz.dateOfBirth.year,"-").concat(h.dateOfBirth.month||h.mrz.dateOfBirth.month,"-").concat(h.dateOfBirth.day||h.mrz.dateOfBirth.day,"."))),e.next=25,c.getResult();case 25:(A=e.sent).state!==I.Empty&&(console.log("IDBarcode results",A),alert("Hello, ".concat(A.firstName," ").concat(A.lastName,"!\nYou were born on ").concat(A.dateOfBirth.year,"-").concat(A.dateOfBirth.month,"-").concat(A.dateOfBirth.day,"."))),e.next=30;break;case 29:alert("Could not extract information!");case 30:null==d||d.releaseVideoFeed(),null==u||u.delete(),null==s||s.delete(),null==c||c.delete(),Ee(),null===(i=document.getElementById("screen-start"))||void 0===i||i.classList.remove("hidden"),null===(a=document.getElementById("screen-scanning"))||void 0===a||a.classList.add("hidden");case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){Ee(),function(e){var t="#FFFF00FF";0===e.detectionStatus?t="#FF0000FF":1===e.detectionStatus&&(t="#00FF00FF");Re.fillStyle=t,Re.strokeStyle=t,Re.lineWidth=5}(e),function(e){switch(e.detectionStatus){case f.Fail:Se("Scanning...");break;case f.Success:case f.FallbackSuccess:Se("Detection successful");break;case f.CameraAtAngle:Se("Adjust the angle");break;case f.CameraTooHigh:Se("Move document closer");break;case f.CameraTooNear:case f.DocumentTooCloseToEdge:case f.Partial:Se("Move document farther");break;default:console.warn("Unhandled detection status!",e.detectionStatus)}}(e),function(e){var t=me.width/me.height,n=ge.videoWidth/ge.videoHeight,r=0,o=0,i=0,a=0;t>n?(i=me.height,a=n*i,r=(me.width-a)/2):(a=me.width,i=a/n,o=(me.height-i)/2);Re.translate(r,o),Re.scale(a/ge.videoWidth,i/ge.videoHeight),Re.transform(e[0],e[3],e[1],e[4],e[2],e[5])}(e.transformMatrix),Re.beginPath(),Re.moveTo(e.topLeft.x,e.topLeft.y),Re.lineTo(e.topRight.x,e.topRight.y),Re.lineTo(e.bottomRight.x,e.bottomRight.y),Re.lineTo(e.bottomLeft.x,e.bottomLeft.y),Re.closePath(),Re.stroke()}function Ee(){me.width=me.clientWidth,me.height=me.clientHeight,Re.clearRect(0,0,me.width,me.height)}var ve=!1;function Se(e,t){ve&&!t||(ve=!0,Ie.innerText=e,window.setTimeout((function(){return ve=!1}),1e3))}!function(){if(function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1}()){var e="sRwAAAYJbG9jYWxob3N0r/lOPig/w35CpJnWLTU/ZA2BhS3o3LZMmRuJbp0XFwCzZVKrccPrgK1awyZuoVNEw6e8yEZpqNdfTREVwWa6aUv/WNEhYPdUNDaL6F2EC8+hA9Z8Vmj6SHBADdtxwsOb5D3jQ+bQRLdK8ag5hbugO0dPaHvuuXovlb5dcbkLf/TYpynp3oNubkDsxob3WuSg11yQG3lbM+s+eSvTxZK69gnv35f2ik8n3FJ0YrJIEiJm5QYZ/Ct9skd55fUkSMPKVAe9vxXdRg==";"blinkid.github.io"===window.location.hostname&&(e="sRwAAAYRYmxpbmtpZC5naXRodWIuaW+qBF9hW4YlTvZbRuaCOIfilh+3gcCzd2iDxc1K/ub5T7/ysAxgSEt2TN4k033dE/XPuz81FDaUUXiWlEdkSFFF8J5ScPmnjswoLujXCrT6j0b2ZY66/wGwO9nM9C9qdSZhOKO+8DDv0xL0adz1pgtXFuwSzjsRTN8uqBrK0dFeVYIyKJzScJKzOmbJ+60NfedBeY7s7vWCKQfT4oy3pCmaFaatTf+Q0aBPmn3rjDd9Bkmc+TgRnJzeX19nrqNTFODxecSD5xui");var t=new J(e);t.allowHelloMessage=!0,t.loadProgressCallback=function(e){return Ae.value=e},t.engineLocation="/resources",t.workerLocation="/resources",q(t).then((function(e){var t,n,r;null===(t=document.getElementById("screen-initial"))||void 0===t||t.classList.add("hidden"),null===(n=document.getElementById("screen-start"))||void 0===n||n.classList.remove("hidden"),null===(r=document.getElementById("start-scan"))||void 0===r||r.addEventListener("click",(function(t){t.preventDefault(),function(e){fe.apply(this,arguments)}(e)}))}),(function(e){he.innerText="Failed to load SDK!",console.error("Failed to load SDK!",e)}))}else he.innerText="This browser is not supported!"}()}]);