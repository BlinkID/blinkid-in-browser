// Copyright (c) Microblink. All rights reserved.
var index=function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function t(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}class n{constructor(e){this.nativeRecognizerRunner=e}processImage(e){const t=this.nativeRecognizerRunner.processImage(e);return Promise.resolve(t)}reconfigureRecognizers(e,t){return new Promise((n,o)=>{try{this.nativeRecognizerRunner.reconfigureRecognizers(e,t),n()}catch(e){o(e)}})}setMetadataCallbacks(e){return this.nativeRecognizerRunner.setJSDelegate(e),Promise.resolve()}resetRecognizers(e){return this.nativeRecognizerRunner.resetRecognizers(e),Promise.resolve()}setDetectionOnlyMode(e){return this.nativeRecognizerRunner.setDetectionOnlyMode(e),Promise.resolve()}setClearTimeoutCallback(e){return this.nativeRecognizerRunner.setClearTimeoutCallback(e),Promise.resolve()}setCameraPreviewMirrored(e){return this.nativeRecognizerRunner.setCameraPreviewMirrored(e),Promise.resolve()}delete(){return this.nativeRecognizerRunner.delete(),this.nativeRecognizerRunner=null,Promise.resolve()}}class o{constructor(e){this.realWasmModule=e}newRecognizer(e,...t){const n=new this.realWasmModule[e](...t);return n.recognizerName=e,Promise.resolve(n)}createRecognizerRunner(e,t=!1,o={}){const i=new this.realWasmModule.RecognizerRunner(e,t,o);return Promise.resolve(new n(i))}}class i{constructor(e){this.mbWasmModule=new o(e)}}let r=0;class s{constructor(e){this.action=e,this.messageID=function(){const e=r;return r+=1,e}()}}class a extends s{constructor(e,t){super(a.action),this.wasmModuleName=e.wasmModuleName,this.licenseKey=e.licenseKey,this.userId=t,this.registerLoadCallback=null!=e.loadProgressCallback}}var c,l,d,u,h;a.action="init",function(e){e[e.Any=0]="Any",e[e.Recognizer=1]="Recognizer"}(c||(c={}));class m extends s{constructor(e,t){super(m.action),this.className=e,this.params=t}}m.action="createNewNativeObject";class g extends s{constructor(e,t,n){super(g.action),this.recognizerHandles=e,this.allowMultipleResults=t,this.registeredMetadataCallbacks=n}}g.action="createRecognizerRunner";class R extends s{constructor(e,t){super(R.action),this.recognizerHandles=e,this.allowMultipleResults=t}}R.action="reconfigureRecognizerRunner";class b extends s{constructor(){super(b.action)}}b.action="deleteRecognizerRunner";class D extends s{constructor(e,t,n){super(D.action),this.objectHandle=e,this.methodName=t,this.params=n}}D.action="invokeObject";class v extends s{constructor(e){super(v.action),this.frame=e}getTransferrables(){return[this.frame.imageData.data.buffer]}}v.action="processImage";class p extends s{constructor(e){super(p.action),this.hardReset=e}}p.action="resetRecognizers";class w{constructor(){this.onDebugText=!1,this.onDetectionFailed=!1,this.onQuadDetection=!1,this.onPointsDetection=!1,this.onFirstSideResult=!1,this.onGlare=!1}}class f extends s{constructor(e){super(f.action),this.registeredMetadataCallbacks=e}}f.action="registerMetadataCallbacks";class C extends s{constructor(e){super(C.action),this.detectionOnlyMode=e}}C.action="setDetectionOnly";class k extends s{constructor(e){super(k.action),this.callbackNonEmpty=e}}k.action="setClearTimeoutCallback";class M extends s{constructor(e){super(M.action),this.cameraPreviewMirrored=e}}function P(e,t){return n=>{const o=n;o.success?e():t(o.error)}}function T(e,t){return n=>{const o=n;o.success?e(n):t(o.error)}}M.action="setCameraPreviewMirrored",function(e){e[e.onDebugText=0]="onDebugText",e[e.onDetectionFailed=1]="onDetectionFailed",e[e.onQuadDetection=2]="onQuadDetection",e[e.onPointsDetection=3]="onPointsDetection",e[e.onFirstSideResult=4]="onFirstSideResult",e[e.clearTimeoutCallback=5]="clearTimeoutCallback",e[e.onGlare=6]="onGlare"}(l||(l={}));class F{constructor(e,t,n){this.wasmSDKWorker=e,this.objectHandle=n,this.recognizerName=t}getRemoteObjectHandle(){return this.objectHandle}currentSettings(){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((e,t)=>{const n=new D(this.objectHandle,"currentSettings",[]),o=T(t=>{e(t.result)},t);this.wasmSDKWorker.postMessage(n,o)})}updateSettings(e){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((t,n)=>{const o=new D(this.objectHandle,"updateSettings",[{parameter:e,type:c.Any}]),i=P(t,n);this.wasmSDKWorker.postMessage(o,i)})}getResult(){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((e,t)=>{const n=new D(this.objectHandle,"getResult",[]),o=T(t=>{e(t.result)},t);this.wasmSDKWorker.postMessage(n,o)})}delete(){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((e,t)=>{const n=new D(this.objectHandle,"delete",[]),o=P(()=>{this.objectHandle=-1,e()},t);this.wasmSDKWorker.postMessage(n,o)})}}function S(e){const t=new w;return t.onDebugText=!!e.onDebugText,t.onDetectionFailed=!!e.onDetectionFailed,t.onPointsDetection=!!e.onPointsDetection,t.onQuadDetection=!!e.onQuadDetection,t.onFirstSideResult=!!e.onFirstSideResult,t.onGlare=!!e.onGlare,t}class y{constructor(e){this.deleted=!1,this.wasmSDKWorker=e}processImage(e){return this.deleted?Promise.reject("Recognizer runner is deleted. It cannot be used anymore!"):new Promise((t,n)=>{const o=new v(e),i=T(e=>{const n=e.recognitionState;t(n)},n);this.wasmSDKWorker.postTransferrableMessage(o,i)})}reconfigureRecognizers(e,t){return this.deleted?Promise.reject("Recognizer runner is deleted. It cannot be used anymore!"):new Promise((n,o)=>{const i=E(e),r=new R(i,t),s=P(n,o);this.wasmSDKWorker.postMessage(r,s)})}setMetadataCallbacks(e){return new Promise((t,n)=>{const o=new f(S(e)),i=P(t,n);this.wasmSDKWorker.postMessageAndRegisterCallbacks(o,e,i)})}resetRecognizers(e){return new Promise((t,n)=>{const o=new p(e),i=P(t,n);this.wasmSDKWorker.postMessage(o,i)})}setDetectionOnlyMode(e){return new Promise((t,n)=>{const o=new C(e),i=P(t,n);this.wasmSDKWorker.postMessage(o,i)})}setClearTimeoutCallback(e){return new Promise((t,n)=>{const o=new k(null!=e),i=P(t,n);this.wasmSDKWorker.registerClearTimeoutCallback(e),this.wasmSDKWorker.postMessage(o,i)})}setCameraPreviewMirrored(e){return new Promise((t,n)=>{const o=new M(e),i=P(t,n);this.wasmSDKWorker.postMessage(o,i)})}delete(){return this.deleted?Promise.reject("Recognizer runner is already deleted."):new Promise((e,t)=>{const n=new b,o=P(()=>{this.deleted=!0,e()},t);this.wasmSDKWorker.postMessage(n,o)})}}function E(e){const t=[];for(let n in e){const o=e[n];t.push(o.getRemoteObjectHandle())}return t}class I{constructor(e){this.wasmSDKWorker=e}createRecognizerRunner(e,t=!1,n={}){return new Promise((o,i)=>{const r=E(e),s=new g(r,t,S(n)),a=P(()=>{o(new y(this.wasmSDKWorker))},i);this.wasmSDKWorker.postMessageAndRegisterCallbacks(s,n,a)})}newRecognizer(e,...t){return new Promise((n,o)=>{const i=new m(e,function(e){const t=[];for(let n in e){let o=e[n],i=c.Any;o instanceof F&&(i=c.Recognizer,o=o.getRemoteObjectHandle()),t.push({parameter:o,type:i})}return t}(t)),r=T(t=>{n(new F(this.wasmSDKWorker,e,t.objectHandle))},o);this.wasmSDKWorker.postMessage(i,r)})}}class z{constructor(e,t){this.eventHandlers={},this.metadataCallbacks={},this.clearTimeoutCallback=null,this.mbWasmWorker=e,this.mbWasmWorker.onmessage=e=>{this.handleWorkerEvent(e)},this.mbWasmModule=new I(this),this.loadCallback=t}postMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e)}postTransferrableMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e,e.getTransferrables())}postMessageAndRegisterCallbacks(e,t,n){this.eventHandlers[e.messageID]=n,this.metadataCallbacks=t,this.mbWasmWorker.postMessage(e)}registerClearTimeoutCallback(e){this.clearTimeoutCallback=e}handleWorkerEvent(e){if("isCallbackMessage"in e.data){const t=e.data;switch(t.callbackType){case l.onDebugText:this.metadataCallbacks.onDebugText(t.callbackParameters[0]);break;case l.onDetectionFailed:this.metadataCallbacks.onDetectionFailed();break;case l.onPointsDetection:this.metadataCallbacks.onPointsDetection(t.callbackParameters[0]);break;case l.onQuadDetection:this.metadataCallbacks.onQuadDetection(t.callbackParameters[0]);break;case l.onFirstSideResult:this.metadataCallbacks.onFirstSideResult();break;case l.clearTimeoutCallback:this.clearTimeoutCallback.onClearTimeout();break;case l.onGlare:this.metadataCallbacks.onGlare(t.callbackParameters[0]);break;default:throw new Error("Unknown callback type "+t.callbackType)}}else if("isLoadProgressMessage"in e.data){const t=e.data;this.loadCallback(t.progress)}else{const t=e.data,n=this.eventHandlers[t.messageID];delete this.eventHandlers[t.messageID],n(t)}}static createWasmWorker(e,n,o){return t(this,void 0,void 0,(function*(){return new Promise((t,i)=>{const r=new z(e,n.loadProgressCallback),s=new a(n,o),c=P(()=>{t(r)},i);r.postMessage(s,c)})}))}}let A;(d=e.ImageOrientation||(e.ImageOrientation={}))[d.RotatedLeft90=0]="RotatedLeft90",d[d.NoRotation=1]="NoRotation",d[d.RotatedRight90=2]="RotatedRight90",d[d.Rotated180=3]="Rotated180",(u=e.RecognizerResultState||(e.RecognizerResultState={}))[u.Empty=0]="Empty",u[u.Uncertain=1]="Uncertain",u[u.Valid=2]="Valid",(h=e.DetectionStatus||(e.DetectionStatus={}))[h.Fail=0]="Fail",h[h.Success=1]="Success",h[h.CameraTooHigh=2]="CameraTooHigh",h[h.FallbackSuccess=3]="FallbackSuccess",h[h.Partial=4]="Partial",h[h.CameraAtAngle=5]="CameraAtAngle",h[h.CameraTooNear=6]="CameraTooNear",h[h.DocumentTooCloseToEdge=7]="DocumentTooCloseToEdge";class N{constructor(e,t,n){this.imageData=e,this.orientation=t,this.videoFrame=n}}function W(t){let n,o,i=!1;if(t instanceof HTMLVideoElement)n=t.videoWidth,o=t.videoHeight,i=!0;else if(t instanceof HTMLImageElement)n=t.naturalWidth,o=t.naturalHeight;else{if(t instanceof SVGImageElement)throw new Error("Recognition of SVG elements not supported!");n=t.width,o=t.height}A=A||document.createElement("canvas"),A.width=n,A.height=o;const r=A.getContext("2d");r.drawImage(t,0,0,A.width,A.height);let s=r.getImageData(0,0,A.width,A.height);return new N(s,e.ImageOrientation.NoRotation,i)}var _,j,O;(_=e.PreferredCameraType||(e.PreferredCameraType={}))[_.BackFacingCamera=0]="BackFacingCamera",_[_.FrontFacingCamera=1]="FrontFacingCamera",(j=e.NotSupportedReason||(e.NotSupportedReason={})).MediaDevicesNotSupported="MediaDevicesNotSupported",j.CameraNotFound="CameraNotFound",j.CameraNotAllowed="CameraNotAllowed",j.CameraInUse="CameraInUse",j.CameraNotAvailable="CameraNotAvailable";class x extends Error{constructor(e,...t){super(...t),this.reason=e,this.name="VideoRecognizerError"}}(O=e.VideoRecognitionMode||(e.VideoRecognitionMode={}))[O.Recognition=0]="Recognition",O[O.RecognitionTest=1]="RecognitionTest",O[O.DetectionTest=2]="DetectionTest";class H{constructor(t,n){this.videoFeed=null,this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.recognitionTimeoutMs=3e4,this.timeoutID=0,this.videoRecognitionMode=e.VideoRecognitionMode.Recognition,this.onScanningDone=null,this.videoFeed=t,this.recognizerRunner=n}static createVideoRecognizerFromCameraStream(n,o,i=e.PreferredCameraType.BackFacingCamera){return t(this,void 0,void 0,(function*(){return new Promise((r,s)=>t(this,void 0,void 0,(function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const a=yield function(n){return t(this,void 0,void 0,(function*(){let t=[],o=[];{let n=yield navigator.mediaDevices.enumerateDevices();if(n.filter(e=>"videoinput"===e.kind).every(e=>""===e.label)){const e=yield navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});n=yield navigator.mediaDevices.enumerateDevices(),e.getTracks().forEach(e=>e.stop())}const i=n.filter(e=>"videoinput"===e.kind);for(let n in i){const r=i[n];V(r.label)?o.push(new B(r,e.PreferredCameraType.BackFacingCamera)):t.push(new B(r,e.PreferredCameraType.FrontFacingCamera))}}if(t.length>0||o.length>0){let i=o.length>0?o:t;n===e.PreferredCameraType.BackFacingCamera&&o.length>0&&(i=o),n===e.PreferredCameraType.FrontFacingCamera&&t.length>0&&(i=t),i=i.sort((e,t)=>e.label.localeCompare(t.label));{let e=0;const t=i.map(e=>{const t=e.label.match(/\b([0-9]+)MP?\b/i);return null!=t?parseInt(t[1],10):NaN});return t.some(e=>isNaN(e))||(e=t.lastIndexOf(Math.max(...t))),i[e]}}return null}))}(i);if(null==a)return void s(new x(e.NotSupportedReason.CameraNotFound));const c={audio:!1,video:{width:{min:640,ideal:1920,max:1920},height:{min:480,ideal:1080,max:1080}}};""===a.deviceId?c.video.facingMode={ideal:i===e.PreferredCameraType.BackFacingCamera?"environment":"user"}:c.video.deviceId={exact:a.deviceId};const l=yield navigator.mediaDevices.getUserMedia(c);n.controls=!1,n.srcObject=l,a.facing==e.PreferredCameraType.FrontFacingCamera&&(n.style.transform="scaleX(-1)"),yield o.setCameraPreviewMirrored(a.facing==e.PreferredCameraType.FrontFacingCamera),r(new H(n,o))}catch(t){let n=e.NotSupportedReason.CameraInUse;switch(t.name){case"NotFoundError":case"OverconstrainedError":n=e.NotSupportedReason.CameraNotFound;break;case"NotAllowedError":case"SecurityError":n=e.NotSupportedReason.CameraNotAllowed;break;case"AbortError":case"NotReadableError":n=e.NotSupportedReason.CameraNotAvailable;break;case"TypeError":throw t}s(new x(n,t.message))}else s(new x(e.NotSupportedReason.MediaDevicesNotSupported))})))}))}static createVideoRecognizerFromVideoPath(e,n,o){return t(this,void 0,void 0,(function*(){return new Promise(t=>{n.src=e,n.currentTime=0,n.onended=()=>{i.cancelRecognition()};const i=new H(n,o);t(i)})}))}setVideoRecognitionMode(n){return t(this,void 0,void 0,(function*(){this.videoRecognitionMode=n,yield this.recognizerRunner.setDetectionOnlyMode(this.videoRecognitionMode===e.VideoRecognitionMode.DetectionTest)}))}startRecognition(e,t=3e4){if(null==this.videoFeed)throw new Error("The associated video feed has been released!");if(!this.videoFeed.paused)throw new Error("The associated video feed is not paused. Use resumeRecognition instead!");this.cancelled=!1,this.recognitionPaused=!1,this.clearTimeout(),this.recognitionTimeoutMs=t,this.onScanningDone=e,this.recognizerRunner.setClearTimeoutCallback({onClearTimeout:()=>this.clearTimeout()}),this.videoFeed.play().then(()=>this.playPauseEvent(),()=>{alert("Auto-play prevented by browser security rules! Please start video manually!"),this.videoFeed.controls=!0,this.videoFeed.addEventListener("play",()=>this.playPauseEvent()),this.videoFeed.addEventListener("pause",()=>this.playPauseEvent())})}recognize(e=3e4){return t(this,void 0,void 0,(function*(){return new Promise((t,n)=>{try{this.startRecognition(e=>{this.pauseVideoFeed(),t(e)},e)}catch(e){n(e)}})}))}cancelRecognition(){this.cancelled=!0}pauseVideoFeed(){this.pauseRecognition(),this.videoFeed.pause()}pauseRecognition(){this.recognitionPaused=!0}resetRecognizers(e){return t(this,void 0,void 0,(function*(){yield this.recognizerRunner.resetRecognizers(e)}))}getRecognizerRunner(){return this.recognizerRunner}resumeRecognition(e){if(this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.videoFeed.paused)throw new Error("Cannot resume recognition while video feed is paused! You need to use recognize or startRecognition");setTimeout(()=>t(this,void 0,void 0,(function*(){e&&(yield this.resetRecognizers(!0)),this.recognitionLoop()})),1)}releaseVideoFeed(){null!=this.videoFeed&&(null!=this.videoFeed.srcObject&&(this.videoFeed.paused||this.cancelRecognition(),this.videoFeed.srcObject.getTracks().forEach(e=>e.stop()),this.videoFeed.srcObject=null),this.videoFeed=null)}playPauseEvent(){this.videoFeed.paused?this.cancelRecognition():this.resumeRecognition(!0)}recognitionLoop(){return t(this,void 0,void 0,(function*(){const t=W(this.videoFeed),n=yield this.recognizerRunner.processImage(t);n==e.RecognizerResultState.Valid||this.cancelled||this.timedOut?this.videoRecognitionMode==e.VideoRecognitionMode.Recognition||this.cancelled?(this.clearTimeout(),this.onScanningDone(n)):(yield this.recognizerRunner.resetRecognizers(!0),this.clearTimeout()):n!=e.RecognizerResultState.Empty&&0==this.timeoutID&&(this.timeoutID=window.setTimeout(()=>{this.timedOut=!0},this.recognitionTimeoutMs)),this.recognitionPaused||setTimeout(()=>{this.recognitionLoop()},1)}))}clearTimeout(){this.timeoutID>0&&(window.clearTimeout(this.timeoutID),this.timeoutID=0)}}const K=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];function V(e){const t=e.toLowerCase();return K.some(e=>t.includes(e))}class B{constructor(e,t){this.deviceId=e.deviceId,this.facing=t,this.groupId=e.groupId,this.label=e.label}}function U(){let e=localStorage.getItem("mb-user-id");return null==e&&(e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),localStorage.setItem("mb-user-id",e)),e}var L,Y,G;(L=e.BarcodeFormat||(e.BarcodeFormat={}))[L.NONE=0]="NONE",L[L.QR_CODE=1]="QR_CODE",L[L.DATA_MATRIX=2]="DATA_MATRIX",L[L.UPC_E=3]="UPC_E",L[L.UPC_A=4]="UPC_A",L[L.EAN_8=5]="EAN_8",L[L.EAN_13=6]="EAN_13",L[L.CODE_128=7]="CODE_128",L[L.CODE_39=8]="CODE_39",L[L.ITF=9]="ITF",L[L.AZTEC_BARCODE=10]="AZTEC_BARCODE",L[L.PDF417_BARCODE=11]="PDF417_BARCODE";(Y=e.IdBarcodeDocumentType||(e.IdBarcodeDocumentType={}))[Y.None=0]="None",Y[Y.AAMVACompliant=1]="AAMVACompliant",Y[Y.ArgentinaID=2]="ArgentinaID",Y[Y.ArgentinaDL=3]="ArgentinaDL",Y[Y.ColombiaID=4]="ColombiaID",Y[Y.ColombiaDL=5]="ColombiaDL",Y[Y.NigeriaVoterID=6]="NigeriaVoterID",Y[Y.NigeriaDL=7]="NigeriaDL",Y[Y.PanamaID=8]="PanamaID",Y[Y.SouthAfricaID=9]="SouthAfricaID";class Q{constructor(e=0,t=0,n=0,o=0){this.upFactor=0,this.downFactor=0,this.leftFactor=0,this.rightFactor=0,this.checkExtensionFactor(e),this.checkExtensionFactor(t),this.checkExtensionFactor(n),this.checkExtensionFactor(o),this.upFactor=e,this.downFactor=t,this.leftFactor=n,this.rightFactor=o}checkExtensionFactor(e){if(e>1||e<-1)throw new Error("Extension factor must be in range [-1.0, 1.0]")}}function X(e){if(e<100||e>400)throw new Error("DPI must be from interval [100, 400]")}return(G=e.MrtdDocumentType||(e.MrtdDocumentType={}))[G.MRTD_TYPE_UNKNOWN=0]="MRTD_TYPE_UNKNOWN",G[G.MRTD_TYPE_IDENITY_CARD=1]="MRTD_TYPE_IDENITY_CARD",G[G.MRTD_TYPE_PASSPORT=2]="MRTD_TYPE_PASSPORT",G[G.MRTD_TYPE_VISA=3]="MRTD_TYPE_VISA",G[G.MRTD_TYPE_GREEN_CARD=4]="MRTD_TYPE_GREEN_CARD",G[G.MRTD_TYPE_MYS_PASS_IMM13P=5]="MRTD_TYPE_MYS_PASS_IMM13P",e.BarcodeRecognizerSettings=class{constructor(){this.shouldScanInverse=!1,this.slowerThoroughScan=!0,this.nullQuietZoneAllowed=!1,this.uncertainDecodingAllowed=!0,this.useAutoScale=!0,this.readCode39AsExtendedData=!1,this.scanAztec=!1,this.scanCode128=!1,this.scanCode39=!1,this.scanDataMatrix=!1,this.scanEAN13=!1,this.scanEAN8=!1,this.scanITF=!1,this.scanPDF417=!1,this.scanQRCode=!1,this.scanUPCA=!1,this.scanUPCE=!1}},e.CapturedFrame=N,e.ExtensionFactors=Q,e.IdBarcodeRecognizerSettings=class{},e.MrtdRecognizerSettings=class{constructor(){this.allowUnparsedResults=!1,this.allowUnverifiedResults=!0,this.allowSpecialCharacters=!1,this.returnFullDocumentImage=!1,this.returnEncodedFullDocumentImage=!1,this._fullDocumentImageDpi=250,this.fullDocumentImageExtensionFactors=new Q}get fullDocumentImageDpi(){return this._fullDocumentImageDpi}set fullDocumentImageDpi(e){X(e),this._fullDocumentImageDpi=e}},e.VideoRecognizer=H,e.VideoRecognizerError=x,e.WasmSDKLoadSettings=class{constructor(e){this.useWebWorker=!0,this.wasmModuleName="BlinkIDWasmSDK",this.loadProgressCallback=null,this.licenseKey=e}},e.captureFrame=W,e.createBarcodeRecognizer=function(e){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("BarcodeRecognizer")}))},e.createIdBarcodeRecognizer=function(e){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("IdBarcodeRecognizer")}))},e.createMrtdRecognizer=function(e){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("MrtdRecognizer")}))},e.createRecognizerRunner=function(e,n,o=!1,i={}){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.createRecognizerRunner(n,o,i)}))},e.createSuccessFrameGrabberRecognizer=function(e,n){return t(this,void 0,void 0,(function*(){let t=yield e.mbWasmModule.newRecognizer("SuccessFrameGrabberRecognizer",n);return t.wrappedRecognizer=n,t}))},e.isBrowserSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1},e.loadWasmModule=function(e){return t(this,void 0,void 0,(function*(){return new Promise((n,o)=>t(this,void 0,void 0,(function*(){if(null===e.licenseKey||void 0===e.licenseKey)return void o("Missing license key!");if(!e.wasmModuleName)return void o("Missing WASM module name!");const t=U();if(e.useWebWorker)try{const o=yield z.createWasmWorker(new Worker("./MicroblinkSDK.worker.js"),e,t);n(o)}catch(e){o(e)}else{const r=self[e.wasmModuleName];let s=void 0;null!=e.loadProgressCallback&&(s={setStatus:t=>{e.loadProgressCallback(function(e){if("Running..."==e)return 100;if(0==e.length)return 0;const t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);if(t){return 100*parseInt(t[2])/parseInt(t[4])}return console.debug("Cannot parse emscripten status: ",e),NaN}(t))}}),r(s).then(r=>{try{return r.initializeWithLicenseKey(e.licenseKey,t),void n(new i(r))}catch(e){return void o(e)}},e=>{console.log("Failed to load WASM. Reason: "+e),o(e)})}})))}))},e.validateDpi=X,e}({});
